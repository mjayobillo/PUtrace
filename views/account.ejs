<%- include('_header') %>

<section class="card">
  <div style="display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem;flex-wrap:wrap;">
    <div class="account-avatar"><%= currentUser.full_name.charAt(0).toUpperCase() %></div>
    <div>
      <h2 style="margin-bottom:0.2rem;"><%= currentUser.full_name %></h2>
      <p style="color:#888;font-size:0.9rem;"><%= currentUser.email %></p>
    </div>
  </div>

  <div class="account-grid">
    <div>
      <h3>Profile Information</h3>
      <div class="info-row">
        <span class="info-label">Full Name</span>
        <span class="info-value"><%= currentUser.full_name %></span>
      </div>
      <div class="info-row">
        <span class="info-label">Email</span>
        <span class="info-value"><%= currentUser.email %></span>
      </div>
      <div class="info-row">
        <span class="info-label">Member Since</span>
        <span class="info-value"><%= new Date(createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %></span>
      </div>
    </div>

    <div>
      <h3>Update Profile</h3>
      <form method="post" action="/account">
        <label>Full name <input name="full_name" value="<%= currentUser.full_name %>" required /></label>
        <button type="submit" class="btn-sm">Save Changes</button>
      </form>

      <hr style="margin:1.5rem 0;border:none;border-top:1px solid #f0f2f5;">

      <h3>Change Password</h3>
      <form method="post" action="/account/password">
        <label>Current password <input type="password" name="current_password" required /></label>
        <label>New password <small style="font-weight:400;color:#aaa;">(min 8 chars)</small> <input type="password" name="new_password" required minlength="8" /></label>
        <button type="submit" class="btn-sm btn-outline">Update Password</button>
      </form>
    </div>
  </div>
</section>

<section class="card">
  <h3>Quick Stats</h3>
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-number"><%= itemCount %></div>
      <div class="stat-label">Items Registered</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= openReports %></div>
      <div class="stat-label">Open Reports</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= resolvedReports %></div>
      <div class="stat-label">Resolved</div>
    </div>
  </div>
</section>

<%- include('_footer') %>
