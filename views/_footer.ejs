    </main>
    <footer class="site-footer">
      <p>&copy; 2026 PUTrace &mdash; Campus Item Recovery System</p>
      <p>Built with Node.js &amp; Supabase</p>
    </footer>
    <script>
      // Toggle password visibility
      var _eyeOpen = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>';
      var _eyeOff = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>';
      function togglePassword(inputId, toggle) {
        var input = document.getElementById(inputId);
        if (input.type === 'password') {
          input.type = 'text';
          toggle.title = 'Hide password';
          toggle.innerHTML = _eyeOff;
          toggle.style.opacity = '1';
        } else {
          input.type = 'password';
          toggle.title = 'Show password';
          toggle.innerHTML = _eyeOpen;
          toggle.style.opacity = '0.55';
        }
      }

      // Restore scroll position after redirect
      (function () {
        var scrollY = sessionStorage.getItem("scrollY");
        if (scrollY) {
          window.scrollTo(0, parseInt(scrollY, 10));
          sessionStorage.removeItem("scrollY");
        }
        document.querySelectorAll("form").forEach(function (form) {
          form.addEventListener("submit", function () {
            sessionStorage.setItem("scrollY", window.scrollY);
          });
        });
      })();

      // Make success notifications more visible via modal confirmation
      (function () {
        var modal = document.getElementById("success-modal");
        if (!modal) return;
        var previousFocus = document.activeElement;

        function closeModal() {
          modal.style.display = "none";
          if (previousFocus && typeof previousFocus.focus === "function") previousFocus.focus();
        }

        var closeBtn = document.getElementById("success-modal-close");
        var okBtn = document.getElementById("success-modal-ok");

        if (closeBtn) closeBtn.addEventListener("click", closeModal);
        if (okBtn) okBtn.addEventListener("click", closeModal);
        if (okBtn) okBtn.focus();

        modal.addEventListener("click", function (event) {
          if (event.target === modal) closeModal();
        });

        document.addEventListener("keydown", function (event) {
          if (event.key === "Escape") closeModal();
          if (event.key === "Tab") {
            var focusable = [closeBtn, okBtn].filter(Boolean);
            if (focusable.length === 0) return;
            var first = focusable[0];
            var last = focusable[focusable.length - 1];
            var active = document.activeElement;
            if (event.shiftKey && active === first) {
              event.preventDefault();
              last.focus();
            } else if (!event.shiftKey && active === last) {
              event.preventDefault();
              first.focus();
            }
          }
        });
      })();
      // Error modal
      (function () {
        var modal = document.getElementById('error-modal');
        if (!modal) return;
        var previousFocus = document.activeElement;
        function closeModal() {
          modal.style.display = 'none';
          if (previousFocus && typeof previousFocus.focus === 'function') previousFocus.focus();
        }
        var closeBtn = document.getElementById('error-modal-close');
        var okBtn = document.getElementById('error-modal-ok');
        if (closeBtn) closeBtn.addEventListener('click', closeModal);
        if (okBtn) okBtn.addEventListener('click', closeModal);
        if (okBtn) okBtn.focus();
        modal.addEventListener('click', function (e) { if (e.target === modal) closeModal(); });
        document.addEventListener('keydown', function (e) { if (e.key === 'Escape') closeModal(); });
      })();

      // Form submit spinner
      (function () {
        document.querySelectorAll('form').forEach(function (form) {
          form.addEventListener('submit', function () {
            var btn = form.querySelector('button[type="submit"], button:not([type])');
            if (!btn || btn.disabled) return;
            btn.disabled = true;
            btn.innerHTML = '<span class="btn-spinner"></span>Please waitâ€¦';
          });
        });
      })();

      // Hamburger nav toggle
      (function () {
        var toggle = document.getElementById('nav-toggle');
        var nav = document.getElementById('site-nav');
        if (!toggle || !nav) return;
        toggle.addEventListener('click', function () {
          var open = nav.classList.toggle('nav-open');
          toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
          toggle.setAttribute('aria-label', open ? 'Close navigation menu' : 'Open navigation menu');
        });
        nav.querySelectorAll('a').forEach(function (link) {
          link.addEventListener('click', function () {
            nav.classList.remove('nav-open');
            toggle.setAttribute('aria-expanded', 'false');
            toggle.setAttribute('aria-label', 'Open navigation menu');
          });
        });
      })();
    </script>
  </body>
</html>
